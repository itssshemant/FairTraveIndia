import{c as S,j as e,a as ne,r as s,B as u,s as N}from"./index-yoHOzVXd.js";import{H as v,C as h,b as w,a as p,B as oe}from"./badge-BexDr--y.js";import{C as ie,I as k}from"./input-C3FXSUbM.js";import{M as ce}from"./map-pin-Cdb2Qwzk.js";import{I as M}from"./indian-rupee-B-3KGSH4.js";import{C as de}from"./camera-nyBoFP_U.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],C=S("circle-alert",me);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],he=S("file-text",xe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],ue=S("upload",ge);function pe({className:c,...l}){return e.jsx("textarea",{"data-slot":"textarea",className:ne("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",c),...l})}function Ce({onNavigate:c,isLoggedIn:l,userName:b,user:f,onShowLogin:i,onLogout:j}){const[g,Y]=s.useState(1),[n,q]=s.useState("Auto Rickshaw"),[I,R]=s.useState(!1),[d,P]=s.useState(""),[A,F]=s.useState([]),[y,T]=s.useState(null),[U,G]=s.useState(""),[$,W]=s.useState("Connaught Place, New Delhi"),[D,E]=s.useState(!1),[H,_]=s.useState(null),[V,B]=s.useState(!1),K=[{name:"Auto Rickshaw",icon:"ðŸ›º"},{name:"Taxi",icon:"ðŸš•"},{name:"Shop",icon:"ðŸª"},{name:"Guide",icon:"ðŸ‘¨â€ðŸ«"},{name:"Ticket",icon:"ðŸŽ«"},{name:"Other",icon:"ðŸ“"}],O=["Details","Location","Amount","Submit"],Z=t=>{const r=t.target.files;if(r&&r.length>0){const o=r[0];if(F([o]),o.type.startsWith("image/")){const x=new FileReader;x.onloadend=()=>{T(x.result)},x.readAsDataURL(o)}alert(`File uploaded: ${o.name} (${(o.size/1024).toFixed(2)} KB)`)}},J=()=>{alert(`Opening camera...

Note: In a real app, this would access your device camera to take a photo of the receipt or bill.`)},Q=()=>{F([]),T(null)},X=async()=>{if(!f)return;E(!0),_(null);let t=null;try{if(A.length>0){const o=A[0],x=o.name.split(".").pop(),z=`${f.id}_${Date.now()}.${x}`,{data:fe,error:se}=await N.storage.from("evidence").upload(z,o,{cacheControl:"3600",upsert:!1});if(se)throw new Error("File upload failed. Please try again.");const{data:le}=N.storage.from("evidence").getPublicUrl(z);t=le?.publicUrl||null}const{error:r}=await N.from("reports").insert({user_id:f.id,category:n,amount:parseFloat(d)||0,location:$,description:U||"Overcharging report",is_verified:!1,evidence_url:t});if(r)throw new Error("Report submission failed. Please try again.");R(!0),B(!0),setTimeout(()=>B(!1),2500)}catch(r){_(r.message||"Something went wrong.")}finally{E(!1)}};if(!l)return e.jsxs("div",{className:"min-h-screen pb-20",children:[e.jsx(v,{isLoggedIn:l,userName:b,onShowLogin:i,onLogout:j}),e.jsx("main",{className:"max-w-4xl mx-auto px-4 py-6 flex items-center justify-center min-h-[60vh]",children:e.jsxs(h,{className:"border-gray-200 shadow-lg p-8 text-center max-w-md",children:[e.jsx(C,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Sign In Required"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Please sign in to report overcharging and help the community."}),e.jsx(u,{onClick:i,className:"w-full bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700",children:"Sign In"})]})}),e.jsx(w,{currentScreen:"report",onNavigate:c,isLoggedIn:l,onShowLogin:i})]});if(I)return e.jsxs("div",{className:"min-h-screen pb-20",children:[e.jsx(v,{isLoggedIn:l,userName:b,onShowLogin:i,onLogout:j}),e.jsx("main",{className:"max-w-2xl mx-auto px-4 py-12",children:e.jsx(h,{className:"border-green-200 bg-gradient-to-br from-green-50 to-emerald-50 shadow-2xl",children:e.jsxs(p,{className:"p-12 text-center space-y-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center mx-auto shadow-lg animate-bounce",children:e.jsx(ie,{className:"w-12 h-12 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-3",children:"Report Submitted!"}),e.jsx("p",{className:"text-lg text-gray-700",children:"Thank you for helping the community"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-6 border border-green-200",children:[e.jsx("p",{className:"text-gray-700 mb-2",children:"Your report has been verified and added to our database"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["You've earned ",e.jsx("span",{className:"font-bold text-green-600",children:"+10 points"})," ðŸŽ‰"]})]}),e.jsxs("div",{className:"pt-4 space-y-3",children:[e.jsx(u,{onClick:()=>c("home"),className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 shadow-lg h-12 font-semibold",children:"Back to Home"}),e.jsx(u,{onClick:()=>{R(!1),Y(1),P("")},variant:"outline",className:"w-full border-green-300 hover:bg-green-50 h-12 font-semibold",children:"Submit Another Report"})]})]})})}),e.jsx(w,{currentScreen:"report",onNavigate:c,isLoggedIn:l,onShowLogin:i})]});const a=n==="Auto Rickshaw"?{min:40,max:60}:n==="Taxi"?{min:180,max:250}:n==="Shop"?{min:50,max:200}:n==="Guide"?{min:500,max:1500}:n==="Ticket"?{min:100,max:500}:{min:0,max:0},L=a.min>0?`â‚¹${a.min}-${a.max}`:"Not available",m=parseInt(d)||0,ee=m>a.max&&a.max>0,te=m>=a.min&&m<=a.max&&a.min>0,re=m>0&&m<a.min&&a.min>0,ae=m-a.max;return e.jsxs("div",{className:"min-h-screen pb-20",children:[e.jsx(v,{isLoggedIn:l,userName:b,onShowLogin:i,onLogout:j}),e.jsxs("main",{className:"max-w-3xl mx-auto px-4 py-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Report Overcharging"}),e.jsx("p",{className:"text-gray-600",children:"Help fellow travelers by sharing your experience"})]}),e.jsx(h,{className:"border-gray-200 shadow-md",children:e.jsx(p,{className:"p-5",children:e.jsx("div",{className:"flex items-center justify-between",children:O.map((t,r)=>e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsxs("div",{className:"flex flex-col items-center flex-1",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold transition-all ${r+1<=g?"bg-gradient-to-br from-orange-500 to-orange-600 text-white shadow-lg":"bg-gray-100 text-gray-400"}`,children:r+1<g?"âœ“":r+1}),e.jsx("span",{className:`text-xs mt-2 font-semibold ${r+1<=g?"text-orange-600":"text-gray-400"}`,children:t})]}),r<O.length-1&&e.jsx("div",{className:`h-1 flex-1 mx-2 rounded-full transition-all ${r+1<g?"bg-gradient-to-r from-orange-500 to-orange-600":"bg-gray-200"}`})]},r))})})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-gray-900 font-bold",children:"Select Service Type"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:K.map(t=>e.jsxs("button",{onClick:()=>q(t.name),className:`p-4 rounded-xl border-2 transition-all ${n===t.name?"border-orange-500 bg-orange-50 shadow-lg":"border-gray-200 bg-white hover:border-orange-200 hover:bg-orange-50"}`,children:[e.jsx("div",{className:"text-3xl mb-2",children:t.icon}),e.jsx("div",{className:`text-sm font-semibold ${n===t.name?"text-orange-600":"text-gray-700"}`,children:t.name})]},t.name))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-gray-900 font-bold",children:"Service/Vendor Name"}),e.jsx(k,{placeholder:"e.g., Auto from Delhi Gate to Red Fort",className:"h-12 border-gray-300 focus:ring-2 focus:ring-orange-500 rounded-xl"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-gray-900 font-bold",children:"Location"}),e.jsxs("div",{className:"relative",children:[e.jsx(ce,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5 z-10"}),e.jsx(k,{placeholder:"Where did this happen?",className:"pl-12 h-12 border-gray-300 focus:ring-2 focus:ring-orange-500 rounded-xl",value:$,onChange:t=>W(t.target.value)})]}),e.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx(C,{className:"w-3 h-3"}),"GPS coordinates will be automatically recorded"]})]}),e.jsx(h,{className:"border-orange-200 bg-gradient-to-br from-orange-50 to-amber-50 shadow-md",children:e.jsxs(p,{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(M,{className:"w-5 h-5 text-orange-600"}),e.jsx("h4",{className:"font-bold text-gray-900",children:"Pricing Details"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-gray-700 font-semibold block",children:"Amount You Were Charged"}),e.jsxs("div",{className:"relative",children:[e.jsx(M,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx(k,{type:"number",placeholder:"Enter amount",value:d,onChange:t=>P(t.target.value),className:"pl-12 h-12 bg-white border-gray-300 focus:ring-2 focus:ring-orange-500 rounded-xl text-lg font-semibold"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border-2 border-dashed border-orange-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-600 font-semibold",children:"Fair Price Range"}),e.jsx(oe,{className:"bg-green-100 text-green-700 border-green-200 font-semibold",children:"Community Verified"})]}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:L}),d&&ee&&e.jsxs("div",{className:"mt-3 p-3 bg-red-50 rounded-lg border border-red-200",children:[e.jsxs("p",{className:"text-sm text-red-700 font-semibold",children:["âš ï¸ You were overcharged by approximately â‚¹",ae]}),e.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["Fair price maximum is â‚¹",a.max]})]}),d&&te&&e.jsxs("div",{className:"mt-3 p-3 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("p",{className:"text-sm text-green-700 font-semibold",children:"âœ“ This is within the fair price range"}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"You paid a reasonable amount"})]}),d&&re&&e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("p",{className:"text-sm text-blue-700 font-semibold",children:"ðŸ’¡ This is below the typical fair price"}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"You got a great deal! Consider verifying the service quality."})]})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-gray-900 font-bold",children:"Add Evidence (Optional)"}),y&&e.jsxs("div",{className:"relative bg-white border-2 border-green-500 rounded-xl p-4 mb-3",children:[e.jsx("button",{onClick:Q,className:"absolute top-2 right-2 w-8 h-8 bg-red-500 rounded-full flex items-center justify-center text-white hover:bg-red-600 transition-colors",children:"Ã—"}),e.jsx("img",{src:y,alt:"Upload preview",className:"w-full h-48 object-cover rounded-lg"}),e.jsx("p",{className:"text-sm text-green-700 font-semibold mt-2 text-center",children:"âœ“ Photo uploaded successfully"})]}),!y&&e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:J,className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-orange-400 transition-all cursor-pointer bg-white group",children:[e.jsx(de,{className:"w-8 h-8 text-gray-400 mx-auto mb-2 group-hover:text-orange-500 transition-colors"}),e.jsx("p",{className:"text-sm font-semibold text-gray-700 group-hover:text-orange-600",children:"Take Photo"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Receipt or bill"})]}),e.jsxs("label",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-orange-400 transition-all cursor-pointer bg-white group",children:[e.jsx("input",{type:"file",accept:"image/*,.pdf",onChange:Z,className:"hidden"}),e.jsx(ue,{className:"w-8 h-8 text-gray-400 mx-auto mb-2 group-hover:text-orange-500 transition-colors"}),e.jsx("p",{className:"text-sm font-semibold text-gray-700 group-hover:text-orange-600",children:"Upload File"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Photo or document"})]})]}),e.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx(he,{className:"w-3 h-3"}),"Adding evidence increases report credibility by 50%"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-gray-900 font-bold",children:"Additional Details (Optional)"}),e.jsx(pe,{placeholder:"Share your experience... What happened? How did they justify the price? Any other details that might help others.",className:"min-h-32 border-gray-300 focus:ring-2 focus:ring-orange-500 rounded-xl resize-none",value:U,onChange:t=>G(t.target.value)}),e.jsx("p",{className:"text-xs text-gray-500",children:"ðŸ’¡ Detailed reports help the community better understand common scams"})]}),e.jsx(h,{className:"border-blue-200 bg-blue-50",children:e.jsx(p,{className:"p-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(C,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-900",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Your privacy is protected"}),e.jsx("p",{className:"text-blue-700",children:"Reports are anonymous. Only location and pricing data are shared publicly."})]})]})})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(u,{onClick:X,className:"w-full h-14 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 shadow-xl shadow-orange-200 text-lg font-bold rounded-xl",disabled:D,children:D?"Uploading...":"Submit Report & Help Others"}),H&&e.jsx("p",{className:"text-center text-sm text-red-600 font-semibold",children:H}),V&&e.jsx("div",{className:"fixed bottom-8 left-1/2 transform -translate-x-1/2 bg-green-600 text-white px-6 py-3 rounded-xl shadow-lg z-[9999] font-semibold animate-fade-in",children:"Report submitted successfully!"}),e.jsx("p",{className:"text-center text-xs text-gray-500",children:"By submitting, you agree to our community guidelines"})]})]}),e.jsx(w,{currentScreen:"report",onNavigate:c,isLoggedIn:l,onShowLogin:i})]})}export{Ce as ReportScreen};
